<skill name="ticket-workflow" v="3">
<desc>Task tracking bound to git worktrees. Tickets are claimable work units.</desc>

<structure>
```
META/tickets/
  todo/           # unclaimed
  in-progress/    # claimed, has worktree
  review/         # awaiting human review
  done/           # merged
```

Filename = slug: `feature-name.md` → branch `feature-name` → worktree `_feature-name/`
</structure>

<format>
```markdown
# TICKET
Single sentence goal.

Context paragraph.

# CODE SNIPPETS
Implementation patterns (optional).

# NOTES
- Constraints, dependencies, considerations

# TASKS
- [ ] Phase 1: Name
  - [ ] Task with `file/path.rs`
```

Rules: actionable tasks, file paths in backticks, action verbs, non-actionable info in Notes.
</format>

<lifecycle>
**Create**: Write to `todo/{slug}.md`, get approval.

**Claim**: 
```bash
mv META/tickets/todo/{slug}.md META/tickets/in-progress/
cd main && git worktree add ../_{slug} -b {slug}
cd ../_{slug} && git submodule update --init --recursive
```

**Work**: Execute tasks in worktree, mark complete as you go, run tests.

**Submit**: `mv META/tickets/in-progress/{slug}.md META/tickets/review/` — then STOP.

**Review**: Audit tasks, run tests, inspect diff. If changes needed, add Review Addendum.

**Merge** (on human approval):
```bash
cd _{slug} && cargo test && pnpm test      # verify
git rebase -i main                          # squash commits
cd ../main && git merge {slug} --ff-only   # merge
rm -rf ../_{slug} && git worktree prune    # cleanup worktree
git branch -d {slug}                        # delete branch
mv ../META/tickets/review/{slug}.md ../META/tickets/done/
```
</lifecycle>

<addendums>
**Ticket Addendum** — scope expansion before review submission:
```markdown
---

# TICKET ADDENDUM

Reason for expansion.

- [ ] Phase N: New Work
  - [ ] Task
```

**Review Addendum** — fixes after review feedback:
```markdown
---

# REVIEW ADDENDUM

What changed during review.

- [x] Phase N: Review Fixes
  - [x] Fix applied
```
</addendums>

<multi_agent>
Directory structure = implicit coordination:
- `in-progress/` = claimed, don't touch
- Only claim from `todo/`
- One agent per ticket, one ticket per worktree
</multi_agent>
</skill>
