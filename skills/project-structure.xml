<skill name="project-structure" v="2">
<desc>Understanding the development environment directory layout and library sharing workflow</desc>

<overview>
Development is organized under one or more dev roots, each containing projects grouped by type. Each project has a git repository (`main/`) with optional worktrees for parallel development. Libraries are shared via kernel worktrees.
</overview>

<directories>
<dev_root>
A dev root is a directory containing project categories:

```
<dev-root>/
├── apps/                 # Full applications
├── rust/                 # Rust libraries
├── web/                  # Web/JS libraries
└── ...                   # Other project types
```

You can have multiple dev roots. A harness (like Loom) scans configured roots for `ll.xml` manifests.
</dev_root>

<project_layout>
```
<project-root>/           # Operate from here
├── ll.xml                # Project manifest (signals "this is LLXML")
├── main/                 # THE git repository (has .git/)
├── kernel/               # Stable branch worktree (for vendoring, optional)
├── _feature-x/           # Feature worktrees (underscore prefix)
├── META/                 # Shared across worktrees, dev-time only
│   ├── spec/             # Architecture specs (<app>, <library>)
│   ├── skills/           # Project-specific skills
│   ├── rules/            # Project-specific rules
│   ├── tickets/          # Ticket workflow directories
│   └── logs/             # Development logs
└── ctx/                  # Assembled context output
```
</project_layout>
</directories>

<library_workflow>
<development>
Libraries follow the same project layout. The `main/` directory is the git repository.
</development>

<publishing>
Libraries have a `kernel` worktree for vendoring. "Publishing" is merging main to stable:
```bash
cd <library-root>
git -C kernel merge main
```
</publishing>

<consuming>
Projects vendor from the kernel worktree using the `vnd` script or manual submodule commands:
```bash
vnd add rust/http_api
```

Then reference in your build config (e.g., Cargo.toml):
```toml
[workspace.dependencies]
http_api = { path = "vendor/http_api" }
```
</consuming>
</library_workflow>

<key_concepts>
- **main/ is the repo** - Contains `.git/`, is the source of truth
- **Worktrees are ephemeral** - Created for features, removed after merge
- **META is shared** - Lives at project root, accessible from all worktrees
- **Operate from project root** - Not from inside main/ or worktrees
- **ll.xml is the manifest** - Signals a directory is an LLXML project
</key_concepts>

<naming_conventions>
- Project root: `<dev-root>/<type>/<name>/`
- Git repository: `<project-root>/main/`
- Kernel worktree: `<project-root>/kernel/`
- Feature worktrees: `<project-root>/_feature-name/`
- Vendor submodule: `main/vendor/<name>/`
</naming_conventions>
</skill>
